<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="UTF-8">
	<title>人気投票のコメント掲載ページから見たくないコメントを消し飛ばすブックマークレット</title>
	<link rel="stylesheet" type="text/css" href="Style.css">
	<link rel="icon" type="image/png" href="Icon.png">
	<meta name="author" content="Itaru">
</head>

<body>
	<header>
		<object data="Logo.svg" type="image/svg+xml"><a href="index.html">トップページへ</a></object>
		<dl>
			<dt>最終更新</dt>
			<dd>2018年12月4日 1時16分</dd>
		</dl>
	</header>
	<h1>人気投票のコメント掲載ページから見たくないコメントを消し飛ばすブックマークレット</h1>
	<p>Firefox用です。それ以外のブラウザではおそらく動作しません。</p>
	<p>勝手にOSやブラウザの設定を変更したり、ファイルを生成したり等はしません。</p>
	<p><ins datetime="2018-12-4">今となっては古いブックマークレットです。最後に動作確認をしたのは、第８回東方シリーズ人気投票のコメント掲載ページです。</ins></p>
	<h2>使い方</h2>
	<ol>
		<li>
			まず、以下のリンクをブックマークします。
			<p><a class="app" href="javascript:(function(){if(window.show8ba92646b4c0443fbe602faba91c8cfc)show8ba92646b4c0443fbe602faba91c8cfc();else if(localStorage.code8ba92646b4c0443fbe602faba91c8cfc)eval(localStorage.code8ba92646b4c0443fbe602faba91c8cfc);else{var a=document.createElement(&quot;script&quot;);a.type=&quot;application/ecmascript&quot;;a.charset=&quot;UTF-8&quot;;a.src=&quot;https://litorud.github.io/Bookmarklet.txt&quot;;document.body.appendChild(a)}})()">コメントを消し飛ばす</a></p>
		</li>
		<li>
			そして、人気投票のコメント掲載ページに赴きます。
			<ul>
				<li><a href="http://thwiki.info/th/vote8/result_char2a.html">キャラ部門投票コメント 1～10位</a></li>
				<li><a href="http://thwiki.info/th/vote8/result_char2b.html">キャラ部門投票コメント 11～30位</a></li>
				<li><a href="http://thwiki.info/th/vote8/result_char2c.html">キャラ部門投票コメント 31位以下</a></li>
				<li><a href="http://thwiki.info/th/vote8/result_music2a.html">音楽部門投票コメント 1～10位</a></li>
				<li><a href="http://thwiki.info/th/vote8/result_music2b.html">音楽部門投票コメント 11～30位</a></li>
				<li><a href="http://thwiki.info/th/vote8/result_music2c.html">音楽部門投票コメント 31位以下</a></li>
			</ul>
		</li>
		<li>
			ブックマークレットを実行します。すると、コメントの後ろに消し飛ばすボタンが表示されます。
			<p class="note">処理の完了までしばらく時間が掛かります。フリーズしたように見えても、10秒くらいは待ってみて下さい。ブラウザから警告があった場合も、“処理を続行”を選択してみて下さい。</p>
		</li>
		<li>
			消し飛ばすボタンを押すと、そのコメントが消し飛ばされます。
		</li>
	</ol>
	<p>ちなみに、元の状態に戻したいときはページを再読み込みするしかないです。</p>
	<p>もっと使いこなしたい方は、次のセクションもご覧下さい。</p>
	<h2>もっと使う</h2>
	<p>ブックマークレットをもう一度実行するとフォームが表示され、そこから複数のコメントをまとめて消し飛ばすことができます。</p>
	<p class="note">コメントの数が膨大なこともあって、処理にいちいち時間が掛かります。フリーズしたように見えても、10秒くらいは待ってみて下さい。ブラウザから警告があった場合も、“処理を続行”を選択してみて下さい。</p>
	<p>“正規表現として処理する”にチェックを入れると、入力された語句を正規表現として処理します。意味の分からない方はこのチェックボックスは無視しても大丈夫です。意味の分かる方は、活用して下さい。</p>
	<p>“ひらがな/カタカナ等を区別しない”にチェックを入れると、大文字/小文字、ひらがな/カタカナ、全角/半角、捨て仮名などを区別せずにコメントを判定します。例えば、‘い’‘ぃ’‘イ’‘ィ’‘ｲ’‘ｨ’‘ゐ’‘ヰ’をすべて同じ文字とみなします。ただし、“正規表現として処理する”にチェックが入っている場合は、これの効果は限定的です。</p>
	<p>コメントの全体を消し飛ばすのではなく、コメントの中の該当する部分だけを別の語句に置換することもできます。</p>
	<p>通常は、ページに含まれる全てのコメントを対象に、消し飛ばす（または置換する）かどうかを判定します。“適用範囲”を変更することで、特定の順位のコメントだけを対象にできます。“適用範囲”から選択することができるのは、“全体”および画面上に表示されている順位のみです。それ以外の順位を対象にしたい場合は、その順位が画面上に表示されるまでスクロールさせてから、もう一度ブックマークレットを実行してフォームを表示させて下さい。</p>
	<h2>設定の読み込み/保存</h2>
	<p>消し飛ばしたコメントや語句などの情報は、ページを離れるときにDOM Storage（ブラウザがローカルに保有する記憶領域）に保存されます。</p>
	<p>コメント掲載ページを一旦離れても、次回訪れたときにまたブックマークレットを実行すれば、保存された設定情報を自動的に読み出し、前回と同じ状態を再現します。</p>
	<p>さらに、以下の方法で、別のブラウザで同じ状態を再現することもできます。</p>
	<ol>
		<li>ブックマークレットを実行し、フォームを表示します。</li>
		<li>フォームの上にある“管理”タブをクリックします。するとフォームが切り替わります。</li>
		<li>“現在の設定を表示”を押します。すると上部のテキストエリアに文字列が表示され、選択された状態になります。この文字列が、設定情報を表す文字列です。</li>
		<li>上部のテキストエリアに表示された、設定情報を表す文字列をコピーします。</li>
		<li>ここからは再現したい側のブラウザでの操作です。まずコメント掲載ページを訪れ、ブックマークレットを実行します。さらにもう一度ブックマークレットを実行し、フォームを表示させます。</li>
		<li>“管理”タブを選択し、フォームを切り替えます。</li>
		<li>上部のテキストエリアに、先ほど4.でコピーした文字列を貼り付けます。</li>
		<li>“読み込む”を押します。すると、最初のブラウザで行った操作が、このブラウザでも実行されます。</li>
	</ol>
	<p>既定では、コメント掲載ページを訪れてブックマークレットを実行したときは、自動的に保存した設定情報を読み出し、前回の状態を再現します。“起動時に設定を自動的に読み込む”のチェックを外せば、次回よりこの処理は行われません。</p>
	<p>保存されている設定情報を全て消去するときは、“保存されている設定を消去する”を押します。</p>
	<h2>ジャンプ</h2>
	<p>“ジャンプ”タブから見たい順位を選択することで、その順位の先頭までスクロールさせることができます。一覧ページに戻る必要が無くなります。</p>
	<h2>その他細かい挙動</h2>
	<p>文字列を選択した状態でブックマークレットを実行すると、最初からその文字列が入力された状態でフォームが表示されます。</p>
	<p>フォームが表示されているときにブックマークレットを実行すると、以下のような挙動をします。</p>
	<ul>
		<li>文字列を選択した状態であれば、その文字列がフォームに入力されます。</li>
		<li>そうでなければ、フォームを閉じます。</li>
	</ul>
	<p>“消し飛ばしたい語句を入力してください”が空の状態で実行しようとすると、“キャンセル”ボタンを押したのと同様の扱いになります（フォームを閉じます）。</p>
</body>

</html>